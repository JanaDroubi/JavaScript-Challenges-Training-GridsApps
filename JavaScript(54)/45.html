<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Challenge 45: Dark/Light Mode Switcher</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            margin: 0;
            transition: background-color 0.3s, color 0.3s;
        }
        
        .light-mode {
            background-color: white;
            color: black;
        }
        
        .dark-mode {
            background-color: #1a1a1a;
            color: white;
        }
        
        .dark-mode .container {
            background-color: #2d2d2d;
            border-color: #444;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 30px;
            border: 1px solid #ddd;
            border-radius: 10px;
            transition: background-color 0.3s, border-color 0.3s;
        }
        
        h1 { margin-top: 0; }
        
        .mode-switcher {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 0;
        }
        
        .dark-mode .mode-switcher {
            background-color: #555;
        }
        
        .card {
            padding: 20px;
            margin: 15px 0;
            border-radius: 5px;
            background-color: #f5f5f5;
            transition: background-color 0.3s;
        }
        
        .dark-mode .card {
            background-color: #3d3d3d;
        }
        
        .mode-indicator {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 3px;
            margin-left: 10px;
            font-size: 0.9em;
        }
        
        .light-indicator {
            background-color: #ffeb3b;
            color: black;
        }
        
        .dark-indicator {
            background-color: #333;
            color: white;
        }
    </style>
</head>
<body class="light-mode">
    <div class="container">
        <h1>Dark/Light Mode Switcher 
            <span id="mode-indicator" class="mode-indicator light-indicator">Light Mode</span>
        </h1>
        
        <button class="mode-switcher" onclick="toggleMode()">
            Switch to Dark Mode
        </button>
        
        <div class="card">
            <h3>Content Card 1</h3>
            <p>This is sample content that will change appearance based on the selected mode.</p>
        </div>
        
        <div class="card">
            <h3>Content Card 2</h3>
            <p>Try switching between dark and light modes to see the difference.</p>
            <p>The mode preference is saved in localStorage so it persists across page reloads.</p>
        </div>
        
        <div class="card">
            <h3>Current Settings</h3>
            <div id="settings-info"></div>
        </div>
    </div>
    
    <script>
        // Check for saved theme or prefer-color-scheme
        function getPreferredTheme() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                return savedTheme;
            }
            
            // Check for system preference
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                return 'dark';
            }
            
            return 'light';
        }
        
        // Apply theme
        function applyTheme(theme) {
            const body = document.body;
            const button = document.querySelector('.mode-switcher');
            const indicator = document.getElementById('mode-indicator');
            const settingsInfo = document.getElementById('settings-info');
            
            if (theme === 'dark') {
                body.classList.remove('light-mode');
                body.classList.add('dark-mode');
                button.textContent = 'Switch to Light Mode';
                indicator.textContent = 'Dark Mode';
                indicator.className = 'mode-indicator dark-indicator';
                console.log('Applied dark mode');
            } else {
                body.classList.remove('dark-mode');
                body.classList.add('light-mode');
                button.textContent = 'Switch to Dark Mode';
                indicator.textContent = 'Light Mode';
                indicator.className = 'mode-indicator light-indicator';
                console.log('Applied light mode');
            }
            
            // Save to localStorage
            localStorage.setItem('theme', theme);
            
            // Update settings info
            const systemPrefersDark = window.matchMedia && 
                window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            settingsInfo.innerHTML = `
                <p><strong>Current mode:</strong> ${theme}</p>
                <p><strong>Saved in localStorage:</strong> ${localStorage.getItem('theme')}</p>
                <p><strong>System preference:</strong> ${systemPrefersDark ? 'Dark' : 'Light'}</p>
            `;
        }
        
        // Toggle between themes
        function toggleMode() {
            const currentTheme = document.body.classList.contains('dark-mode') ? 'dark' : 'light';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            applyTheme(newTheme);
        }
        
        // Initialize on page load
        window.onload = function() {
            const preferredTheme = getPreferredTheme();
            applyTheme(preferredTheme);
        };
        
        // Listen for system theme changes
        if (window.matchMedia) {
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
                if (!localStorage.getItem('theme')) {
                    applyTheme(e.matches ? 'dark' : 'light');
                }
            });
        }
    </script>
</body>
</html>