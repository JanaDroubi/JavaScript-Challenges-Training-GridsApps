<!DOCTYPE html>
<html>
<head><title>Challenge 27: Fetch and Limit Comments</title></head>
<body>
<h1>Fetch and Display First 5 Comments</h1>
<button onclick="fetchComments()">Fetch Comments</button>
<button onclick="showCode()">Show Code</button>
<div id="comments" style="margin:20px 0;"></div>
<div id="code" style="display:none; background:#f5f5f5; padding:10px;"></div>
<script>
async function fetchComments() {
    try {
        const response = await fetch('https://jsonplaceholder.typicode.com/comments');
        const allComments = await response.json();
        
        // Get first 5 comments
        const firstFive = allComments.slice(0, 5);
        
        let commentsHTML = '<h3>First 5 Comments:</h3>';
        
        firstFive.forEach((comment, index) => {
            commentsHTML += `
                <div style="border:1px solid #ddd; padding:15px; margin:10px 0; background:#f9f9f9;">
                    <strong>#${index + 1}: ${comment.name}</strong><br>
                    <small>By: ${comment.email}</small><br>
                    <p>${comment.body}</p>
                    <small>Post ID: ${comment.postId}</small>
                </div>
            `;
        });
        
        document.getElementById('comments').innerHTML = commentsHTML;
        console.log('First 5 comments:', firstFive);
        
    } catch (error) {
        document.getElementById('comments').innerHTML = `Error: ${error.message}`;
        console.error('Error:', error);
    }
}

function showCode() {
    document.getElementById('code').innerHTML = 
`// Fetch comments and limit to first 5
async function getFirstFiveComments() {
    try {
        const response = await fetch('https://jsonplaceholder.typicode.com/comments');
        const comments = await response.json();
        
        // Get first 5 comments
        const firstFive = comments.slice(0, 5);
        
        // Display in DOM
        displayComments(firstFive);
        
        return firstFive;
        
    } catch (error) {
        console.error('Error fetching comments:', error);
        return [];
    }
}

// Display comments
function displayComments(comments) {
    const container = document.getElementById('commentsContainer');
    container.innerHTML = '';
    
    comments.forEach((comment, index) => {
        const commentDiv = document.createElement('div');
        commentDiv.className = 'comment';
        
        commentDiv.innerHTML = \`
            <h4>Comment #\${index + 1}: \${comment.name}</h4>
            <p><strong>Email:</strong> \${comment.email}</p>
            <p>\${comment.body}</p>
            <small>Post ID: \${comment.postId}</small>
        \`;
        
        container.appendChild(commentDiv);
    });
}

// Alternative: Fetch with query parameters to limit
async function getLimitedComments(limit = 5) {
    // Some APIs support pagination parameters
    const response = await fetch(\`https://jsonplaceholder.typicode.com/comments?_limit=\${limit}\`);
    const comments = await response.json();
    return comments;
}

// Fetch comments for specific post
async function getPostComments(postId, limit = 5) {
    const response = await fetch(\`https://jsonplaceholder.typicode.com/comments?postId=\${postId}\`);
    const comments = await response.json();
    
    // Apply limit
    return comments.slice(0, limit);
}

// Add CSS for better display
const style = document.createElement('style');
style.textContent = \`
.comment {
    border-left: 4px solid #4CAF50;
    padding: 15px;
    margin: 10px 0;
    background-color: #f9f9f9;
}

.comment h4 {
    margin-top: 0;
    color: #333;
}

.comment p {
    margin: 10px 0;
    color: #555;
}

.comment small {
    color: #888;
    font-size: 12px;
}
\`;

document.head.appendChild(style);`;
    document.getElementById('code').style.display = 'block';
}
</script>
</body>
</html>