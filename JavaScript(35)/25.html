<!DOCTYPE html>
<html>
<head><title>Challenge 25: POST JSON to API</title></head>
<body>
<h1>Send POST Request with JSON</h1>
<input type="text" id="postTitle" placeholder="Title" style="padding:10px; margin:5px;"><br>
<textarea id="postBody" placeholder="Body" style="padding:10px; margin:5px; width:300px; height:100px;"></textarea><br>
<button onclick="createPost()">Create Post</button>
<button onclick="showCode()">Show Code</button>
<div id="result" style="margin:20px 0;"></div>
<div id="code" style="display:none; background:#f5f5f5; padding:10px;"></div>
<script>
async function createPost() {
    const title = document.getElementById('postTitle').value || 'Default Title';
    const body = document.getElementById('postBody').value || 'Default body content';
    const userId = Math.floor(Math.random() * 10) + 1;
    
    const postData = {
        title: title,
        body: body,
        userId: userId
    };
    
    try {
        const response = await fetch('https://jsonplaceholder.typicode.com/posts', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(postData)
        });
        
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        
        const result = await response.json();
        
        document.getElementById('result').innerHTML = `
            <h3>âœ… Post Created Successfully!</h3>
            <strong>ID:</strong> ${result.id}<br>
            <strong>Title:</strong> ${result.title}<br>
            <strong>Body:</strong> ${result.body}<br>
            <strong>User ID:</strong> ${result.userId}
        `;
        
        console.log('Post created:', result);
        
        // Clear inputs
        document.getElementById('postTitle').value = '';
        document.getElementById('postBody').value = '';
        
    } catch (error) {
        document.getElementById('result').innerHTML = `Error: ${error.message}`;
        console.error('Error:', error);
    }
}

function showCode() {
    document.getElementById('code').innerHTML = 
`// POST JSON data to API
async function createPost(postData) {
    try {
        const response = await fetch('https://jsonplaceholder.typicode.com/posts', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                // Add additional headers if needed
                // 'Authorization': 'Bearer your-token'
            },
            body: JSON.stringify(postData)
        });
        
        if (!response.ok) {
            throw new Error(\`HTTP error! status: \${response.status}\`);
        }
        
        const data = await response.json();
        console.log('Success:', data);
        return data;
        
    } catch (error) {
        console.error('Error:', error);
        throw error;
    }
}

// Example usage
const newPost = {
    title: 'My New Post',
    body: 'This is the content of my post.',
    userId: 1
};

createPost(newPost)
    .then(result => {
        console.log('Post created with ID:', result.id);
    })
    .catch(error => {
        console.error('Failed to create post:', error);
    });

// PUT request (update)
async function updatePost(postId, updatedData) {
    const response = await fetch(\`https://jsonplaceholder.typicode.com/posts/\${postId}\`, {
        method: 'PUT',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(updatedData)
    });
    
    return response.json();
}

// DELETE request
async function deletePost(postId) {
    const response = await fetch(\`https://jsonplaceholder.typicode.com/posts/\${postId}\`, {
        method: 'DELETE'
    });
    
    return response.json();
}

// PATCH request (partial update)
async function patchPost(postId, partialData) {
    const response = await fetch(\`https://jsonplaceholder.typicode.com/posts/\${postId}\`, {
        method: 'PATCH',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(partialData)
    });
    
    return response.json();
}`;
    document.getElementById('code').style.display = 'block';
}
</script>
</body>
</html>