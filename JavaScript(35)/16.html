<!DOCTYPE html>
<html>
<head><title>Challenge 16: Functions in JSON</title></head>
<body>
<h1>Convert Object with Function to JSON</h1>
<button onclick="convertFunction()">Convert Object with Function</button>
<button onclick="showCode()">Show Code</button>
<div id="result"></div>
<div id="code" style="display:none; background:#f5f5f5; padding:10px;"></div>
<script>
function convertFunction() {
    let obj = {
        name: "Test",
        action: function() { return 5; },
        number: 10,
        regularMethod() { return 20; }
    };
    
    let json = JSON.stringify(obj);
    let parsed = JSON.parse(json);
    
    document.getElementById('result').innerHTML = 
        `<strong>Original object:</strong><br>
         Has action function: ${typeof obj.action}<br>
         Has regularMethod: ${typeof obj.regularMethod}<br><br>
         <strong>JSON string:</strong> ${json}<br><br>
         <strong>After parsing:</strong><br>
         Has action function: ${'action' in parsed ? 'Yes (but undefined)' : 'No'}<br>
         Has regularMethod: ${'regularMethod' in parsed ? 'Yes (but undefined)' : 'No'}<br>
         Has number: ${'number' in parsed ? 'Yes' : 'No'}<br>
         Number value: ${parsed.number}`;
    
    console.log('Original:', obj);
    console.log('JSON:', json);
    console.log('Parsed:', parsed);
}
function showCode() {
    document.getElementById('code').innerHTML = 
`let obj = {
    name: "Test",
    action: function() { return 5; },
    value: 10
};

let json = JSON.stringify(obj);
console.log(json); // '{"name":"Test","value":10}'
// Functions are omitted from JSON

// Functions are not valid JSON values
// They are ignored during stringification

// To preserve functions, you need custom handling:
let obj2 = {
    name: "Test",
    action: "function() { return 5; }" // Store as string
};

// Or use a replacer:
let json2 = JSON.stringify(obj, (key, value) => {
    if (typeof value === 'function') {
        return value.toString(); // Convert function to string
    }
    return value;
});
console.log(json2); // Function as string

// But parsing won't recreate the function
let parsed = JSON.parse(json2);
console.log(typeof parsed.action); // "string" not "function"`;
    document.getElementById('code').style.display = 'block';
}
</script>
</body>
</html>