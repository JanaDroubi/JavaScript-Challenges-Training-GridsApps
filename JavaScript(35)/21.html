<!DOCTYPE html>
<html>
<head><title>Challenge 21: Fetch Users</title></head>
<body>
<h1>Fetch Users from API</h1>
<button onclick="fetchUsers()">Fetch Users</button>
<button onclick="showCode()">Show Code</button>
<div id="result"></div>
<div id="code" style="display:none; background:#f5f5f5; padding:10px;"></div>
<script>
async function fetchUsers() {
    try {
        const response = await fetch('https://jsonplaceholder.typicode.com/users');
        const users = await response.json();
        
        let result = '<h3>User Names:</h3><ul>';
        users.forEach(user => {
            result += `<li>${user.name} (${user.email})</li>`;
        });
        result += '</ul>';
        
        document.getElementById('result').innerHTML = result;
        console.log('Users fetched:', users);
    } catch (error) {
        document.getElementById('result').innerHTML = `Error: ${error.message}`;
        console.error('Fetch error:', error);
    }
}

function showCode() {
    document.getElementById('code').innerHTML = 
`async function fetchUsers() {
    try {
        // Fetch data from API
        const response = await fetch('https://jsonplaceholder.typicode.com/users');
        
        // Convert response to JSON
        const users = await response.json();
        
        // Process and display data
        console.log('Total users:', users.length);
        users.forEach(user => {
            console.log(\`Name: \${user.name}, Email: \${user.email}\`);
        });
        
        return users;
    } catch (error) {
        console.error('Error fetching users:', error);
    }
}

// Alternative with .then()
fetch('https://jsonplaceholder.typicode.com/users')
    .then(response => response.json())
    .then(users => {
        console.log('Users:', users);
    })
    .catch(error => {
        console.error('Error:', error);
    });

// Note: CORS may prevent fetching from different domains
// JSONPlaceholder allows cross-origin requests`;
    document.getElementById('code').style.display = 'block';
}
</script>
</body>
</html>