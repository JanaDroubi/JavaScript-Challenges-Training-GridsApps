<!DOCTYPE html>
<html>
<head><title>Challenge 24: Fetch and Display Image</title></head>
<body>
<h1>Fetch and Display Image from API</h1>
<button onclick="fetchImage()">Fetch Random Image</button>
<button onclick="fetchCat()">Fetch Cat Image</button>
<button onclick="showCode()">Show Code</button>
<div id="imageContainer" style="margin:20px 0;"></div>
<div id="code" style="display:none; background:#f5f5f5; padding:10px;"></div>
<script>
async function fetchImage() {
    try {
        // Using Picsum Photos API for random images
        const response = await fetch('https://picsum.photos/400/300');
        
        if (!response.ok) throw new Error('Failed to fetch image');
        
        const imageUrl = response.url;
        
        document.getElementById('imageContainer').innerHTML = `
            <img src="${imageUrl}" alt="Random image" style="max-width:400px; border:2px solid #333;">
            <p>Image URL: ${imageUrl}</p>
        `;
        
        console.log('Image fetched:', imageUrl);
    } catch (error) {
        document.getElementById('imageContainer').innerHTML = `Error: ${error.message}`;
        console.error('Error:', error);
    }
}

async function fetchCat() {
    try {
        // Using The Cat API
        const response = await fetch('https://api.thecatapi.com/v1/images/search');
        const data = await response.json();
        const imageUrl = data[0].url;
        
        document.getElementById('imageContainer').innerHTML = `
            <img src="${imageUrl}" alt="Cat" style="max-width:400px; border:2px solid #333;">
            <p>üê± Random Cat Image</p>
        `;
        
        console.log('Cat image:', data[0]);
    } catch (error) {
        document.getElementById('imageContainer').innerHTML = 
            `<p>Cat API failed. Trying alternative...</p>`;
        
        // Fallback to placeholder
        document.getElementById('imageContainer').innerHTML += 
            `<img src="https://placekitten.com/400/300" alt="Kitten placeholder">`;
    }
}

function showCode() {
    document.getElementById('code').innerHTML = 
`// Fetch image from API
async function fetchImage() {
    try {
        // Method 1: Direct image URL (no JSON)
        const response = await fetch('https://picsum.photos/400/300');
        const imageUrl = response.url;
        
        // Display image
        const img = document.createElement('img');
        img.src = imageUrl;
        img.alt = 'Random image';
        document.getElementById('container').appendChild(img);
        
    } catch (error) {
        console.error('Error fetching image:', error);
    }
}

// Method 2: API returns JSON with image URL
async function fetchImageFromJSON() {
    const response = await fetch('https://api.thecatapi.com/v1/images/search');
    const data = await response.json();
    const imageUrl = data[0].url;
    
    return imageUrl;
}

// Method 3: Using Unsplash (requires authentication for production)
async function fetchUnsplashImage() {
    // Note: This requires an API key in production
    const response = await fetch('https://api.unsplash.com/photos/random?client_id=YOUR_ACCESS_KEY');
    const data = await response.json();
    return data.urls.regular;
}

// Display multiple images
async function fetchMultipleImages(count = 3) {
    const container = document.getElementById('imageGallery');
    container.innerHTML = '';
    
    for (let i = 0; i < count; i++) {
        const response = await fetch('https://picsum.photos/200/200?random=' + i);
        const img = document.createElement('img');
        img.src = response.url;
        img.style.margin = '10px';
        container.appendChild(img);
    }
}

// Error handling for images
function createImageWithFallback(url, fallbackUrl) {
    const img = new Image();
    img.src = url;
    img.onerror = () => {
        img.src = fallbackUrl;
        console.log('Using fallback image');
    };
    return img;
}`;
    document.getElementById('code').style.display = 'block';
}
</script>
</body>
</html>